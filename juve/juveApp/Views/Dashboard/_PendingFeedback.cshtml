@model IEnumerable<juveApp.Models.SupportFeedback>

<div id="pending-feedback-list">
    @if (Model != null && Model.Any())
    {
        <div class="space-y-3 max-h-96 overflow-y-auto">
            @foreach (var feedback in Model)
            {
                <div class="border border-gray-200 rounded-lg p-4">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <a href="/users/@feedback.SubmittedById" class="text-blue-600 hover:text-blue-700 font-semibold">
                                @feedback.User?.Username
                            </a>
                            <span class="ml-2 text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded">
                                @feedback.FeedbackType
                            </span>
                        </div>
                        <span class="text-xs text-gray-500">
                            @feedback.CreatedAt.ToString("MMM dd, h:mm tt")
                        </span>
                    </div>
                    <p class="text-gray-700 text-sm mb-3">@feedback.Message</p>
                    <form asp-action="ResolveFeedback" asp-route-id="@feedback.SupportId" method="post"
                        hx-post="/dashboard/resolve-feedback/@feedback.SupportId" hx-target="#pending-feedback-list"
                        hx-swap="outerHTML" class="inline">
                        @Html.AntiForgeryToken()
                        <button type="submit"
                            class="hover:text-white text-green-700 hover:bg-green-700 rounded text-sm font-semibold">
                            Mark as Resolved
                        </button>
                    </form>
                </div>
            }
        </div>
    }
    else
    {
        <p class="text-gray-500">No pending feedback.</p>
    }
</div>